!function(e){function t(t){for(var r,s,c=t[0],i=t[1],l=t[2],d=0,p=[];d<c.length;d++)s=c[d],o[s]&&p.push(o[s][0]),o[s]=0;for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r]);for(u&&u(t);p.length;)p.shift()();return a.push.apply(a,l||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],r=!0,c=1;c<n.length;c++){var i=n[c];0!==o[i]&&(r=!1)}r&&(a.splice(t--,1),e=s(s.s=n[0]))}return e}var r={},o={0:0},a=[];function s(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=r,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(n,r,function(t){return e[t]}.bind(null,r));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/auth/resources/4.8.3.final/account/keycloak/js/";var c=window.webpackJsonp=window.webpackJsonp||[],i=c.push.bind(c);c.push=t,c=c.slice();for(var l=0;l<c.length;l++)t(c[l]);var u=i;a.push([245,1]),n()}({245:function(e,t,n){n(246),n(413),e.exports=n(453)},418:function(e,t,n){var r={"./af":117,"./af.js":117,"./ar":118,"./ar-dz":119,"./ar-dz.js":119,"./ar-kw":120,"./ar-kw.js":120,"./ar-ly":121,"./ar-ly.js":121,"./ar-ma":122,"./ar-ma.js":122,"./ar-sa":123,"./ar-sa.js":123,"./ar-tn":124,"./ar-tn.js":124,"./ar.js":118,"./az":125,"./az.js":125,"./be":126,"./be.js":126,"./bg":127,"./bg.js":127,"./bm":128,"./bm.js":128,"./bn":129,"./bn.js":129,"./bo":130,"./bo.js":130,"./br":131,"./br.js":131,"./bs":132,"./bs.js":132,"./ca":133,"./ca.js":133,"./cs":134,"./cs.js":134,"./cv":135,"./cv.js":135,"./cy":136,"./cy.js":136,"./da":137,"./da.js":137,"./de":138,"./de-at":139,"./de-at.js":139,"./de-ch":140,"./de-ch.js":140,"./de.js":138,"./dv":141,"./dv.js":141,"./el":142,"./el.js":142,"./en-au":143,"./en-au.js":143,"./en-ca":144,"./en-ca.js":144,"./en-gb":145,"./en-gb.js":145,"./en-ie":146,"./en-ie.js":146,"./en-il":147,"./en-il.js":147,"./en-nz":148,"./en-nz.js":148,"./eo":149,"./eo.js":149,"./es":150,"./es-do":151,"./es-do.js":151,"./es-us":152,"./es-us.js":152,"./es.js":150,"./et":153,"./et.js":153,"./eu":154,"./eu.js":154,"./fa":155,"./fa.js":155,"./fi":156,"./fi.js":156,"./fo":157,"./fo.js":157,"./fr":158,"./fr-ca":159,"./fr-ca.js":159,"./fr-ch":160,"./fr-ch.js":160,"./fr.js":158,"./fy":161,"./fy.js":161,"./gd":162,"./gd.js":162,"./gl":163,"./gl.js":163,"./gom-latn":164,"./gom-latn.js":164,"./gu":165,"./gu.js":165,"./he":166,"./he.js":166,"./hi":167,"./hi.js":167,"./hr":168,"./hr.js":168,"./hu":169,"./hu.js":169,"./hy-am":170,"./hy-am.js":170,"./id":171,"./id.js":171,"./is":172,"./is.js":172,"./it":173,"./it.js":173,"./ja":174,"./ja.js":174,"./jv":175,"./jv.js":175,"./ka":176,"./ka.js":176,"./kk":177,"./kk.js":177,"./km":178,"./km.js":178,"./kn":179,"./kn.js":179,"./ko":180,"./ko.js":180,"./ky":181,"./ky.js":181,"./lb":182,"./lb.js":182,"./lo":183,"./lo.js":183,"./lt":184,"./lt.js":184,"./lv":185,"./lv.js":185,"./me":186,"./me.js":186,"./mi":187,"./mi.js":187,"./mk":188,"./mk.js":188,"./ml":189,"./ml.js":189,"./mn":190,"./mn.js":190,"./mr":191,"./mr.js":191,"./ms":192,"./ms-my":193,"./ms-my.js":193,"./ms.js":192,"./mt":194,"./mt.js":194,"./my":195,"./my.js":195,"./nb":196,"./nb.js":196,"./ne":197,"./ne.js":197,"./nl":198,"./nl-be":199,"./nl-be.js":199,"./nl.js":198,"./nn":200,"./nn.js":200,"./pa-in":201,"./pa-in.js":201,"./pl":202,"./pl.js":202,"./pt":203,"./pt-br":204,"./pt-br.js":204,"./pt.js":203,"./ro":205,"./ro.js":205,"./ru":206,"./ru.js":206,"./sd":207,"./sd.js":207,"./se":208,"./se.js":208,"./si":209,"./si.js":209,"./sk":210,"./sk.js":210,"./sl":211,"./sl.js":211,"./sq":212,"./sq.js":212,"./sr":213,"./sr-cyrl":214,"./sr-cyrl.js":214,"./sr.js":213,"./ss":215,"./ss.js":215,"./sv":216,"./sv.js":216,"./sw":217,"./sw.js":217,"./ta":218,"./ta.js":218,"./te":219,"./te.js":219,"./tet":220,"./tet.js":220,"./tg":221,"./tg.js":221,"./th":222,"./th.js":222,"./tl-ph":223,"./tl-ph.js":223,"./tlh":224,"./tlh.js":224,"./tr":225,"./tr.js":225,"./tzl":226,"./tzl.js":226,"./tzm":227,"./tzm-latn":228,"./tzm-latn.js":228,"./tzm.js":227,"./ug-cn":229,"./ug-cn.js":229,"./uk":230,"./uk.js":230,"./ur":231,"./ur.js":231,"./uz":232,"./uz-latn":233,"./uz-latn.js":233,"./uz.js":232,"./vi":234,"./vi.js":234,"./x-pseudo":235,"./x-pseudo.js":235,"./yo":236,"./yo.js":236,"./zh-cn":237,"./zh-cn.js":237,"./zh-hk":238,"./zh-hk.js":238,"./zh-tw":239,"./zh-tw.js":239};function o(e){var t=a(e);return n(t)}function a(e){var t=r[e];if(!(t+1)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return t}o.keys=function(){return Object.keys(r)},o.resolve=a,e.exports=o,o.id=418},450:function(e,t,n){e.exports=n.p+"ad8b8a7bbac38a19cdde32722b5bd900.svg"},451:function(e,t,n){e.exports=n.p+"55aa776005296b67df329d227bb8708c.png"},452:function(e,t){},453:function(e,t,n){"use strict";n.r(t);var r,o=n(2),a=n(85),s=function(e,t,n,r){return void 0===n&&(n=void 0),void 0===r&&(r=void 0),new Promise(function(o,a){var s=window.keycloakUrl?window.keycloakUrl:"https://auth.hanko.io/auth/",c=window.realmId?window.realmId:"master";e.updateToken(30).success(function(a){var i=s+"realms/"+c+t,l=r?{authorization:"Bearer "+e.token,"Content-Type":"application/json"}:{authorization:"Bearer "+e.token},u={method:n||"GET",headers:l,body:r?JSON.stringify(r):null};fetch(i,u).then(function(e){return e.json()}).then(function(e){return o(e)}).catch(function(e){return o(void 0)})})})},c=n(0),i=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e){function t(t){var n=e.call(this,t)||this;return n.deregister=function(){var e=n.props,t=e.device,r=e.keycloak,o=e.deviceDeletedHandler;s(r,"/hanko/devices/"+t.typeId+"/"+t.deviceId,"DELETE").then(function(e){o()})},n}return i(t,e),t.prototype.render=function(){var e=this.props.device;return o.createElement("tr",null,o.createElement("td",null,e.name),o.createElement("td",null,e.type),o.createElement("td",null,c(e.createdAt).fromNow()),o.createElement("td",null,c(e.lastUsage).fromNow()),o.createElement("td",null,o.createElement("button",{onClick:this.deregister},"deregister")))},t}(o.Component),u=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),d=function(e){function t(t){var n=e.call(this,t)||this;return n.state={devices:void 0},n}return u(t,e),t.prototype.render=function(){var e=this.props,t=e.devices,n=e.keycloak,r=e.deviceDeletedHandler;return 0===t.length?o.createElement("div",null,"no devices registered"):o.createElement("table",null,o.createElement("thead",null,o.createElement("tr",null,o.createElement("th",null,"Name"),o.createElement("th",null,"Type"),o.createElement("th",null,"Created At"),o.createElement("th",null,"Last Activity"),o.createElement("th",null))),o.createElement("tbody",null,t.map(function(e,t){return o.createElement(l,{device:e,key:t,keycloak:n,deviceDeletedHandler:r})})))},t}(o.Component),p=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),f=function(e){function t(t){var n=e.call(this,t)||this;return n.requestQrCode=function(){var e=n.props.keycloak;s(e,"/hanko/register","POST").then(function(e){n.setState({qrCode:e.qrCode}),n.updateState()})},n.cancel=function(){(0,n.props.cancelHandler)()},n.updateState=function(){var e=n.props.keycloak;s(e,"/hanko/register/complete","POST").then(function(e){switch(e.status){case"PENDING":n.timerId=window.setTimeout(n.updateState,1e3);break;case"OK":n.setState({qrCode:void 0}),(0,n.props.completionHandler)();break;default:n.setState({qrCode:void 0}),n.cancel()}})},n.state={qrCode:void 0},n}return p(t,e),t.prototype.componentDidMount=function(){this.requestQrCode()},t.prototype.componentWillUnmount=function(){clearTimeout(this.timerId)},t.prototype.render=function(){var e=this.state.qrCode;return o.createElement("div",{className:"flex column align-start"},o.createElement("h1",null,"Register new Hanko Authenticator"),e?o.createElement("div",{className:"margin-bottom"},o.createElement("img",{src:e+"?fg=0&bg=ffffff",className:"fadein"})):null,o.createElement("button",{onClick:this.cancel},"cancel"))},t}(o.Component),m=function(e){return{name:e.keyName,type:"FIDO_UAF"==e.authenticatorType?"Hanko Authenticator":e.authenticatorType,createdAt:e.createdAt,lastUsage:e.lastUsage,deviceId:e.deviceId,typeId:e.authenticatorType}},h=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),j=function(e){function t(t){var n=e.call(this,t)||this;return n.passwordChanged=function(e){n.setState({password:e.target.value})},n.passwordValidationChanged=function(e){n.setState({passwordValidation:e.target.value})},n.changePassword=function(){var e=n.props.keycloak,t=n.state,r=t.password,o=t.passwordValidation;if(r&&r.length>0){if(!(o&&o.length>0&&r===o))return void alert("passwords do not match");s(e,"/hanko/password","POST",{newPassword:r}).then(function(e){n.setState({password:"",passwordValidation:""}),alert("Password successfully changed")}).catch(function(e){console.error(e),alert("Oops, your password could not be updated.")})}else alert("password must not be empty")},n.state={password:"",passwordValidation:""},n}return h(t,e),t.prototype.render=function(){var e=this.state,t=e.password,n=e.passwordValidation;return o.createElement("div",{className:"container"},o.createElement("h1",null,"Change Password"),o.createElement("div",{className:"formfield"},o.createElement("label",null,"Password"),o.createElement("input",{type:"password",value:t,onChange:this.passwordChanged})),o.createElement("div",{className:"formfield"},o.createElement("label",null,"Password (repeat)"),o.createElement("input",{type:"password",value:n,onChange:this.passwordValidationChanged})),o.createElement("button",{onClick:this.changePassword},"change"))},t}(o.Component),y=n(243),v=function(e){for(var t=window.atob(e),n=t.length,r=new Uint8Array(new ArrayBuffer(n)),o=0;o<n;o++)r[o]=t.charCodeAt(o);return r},k=function(e){for(var t="",n=new Uint8Array(e),r=n.byteLength,o=0;o<r;o++)t+=String.fromCharCode(n[o]);return window.btoa(t).replace(/\//g,"_").replace(/\+/g,"-")},b=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),w=function(e){function t(t){var n=e.call(this,t)||this;return n.addThisDevice=function(){var e=n.props,t=e.keycloak,r=e.refetch,o="roaming"==e.type?{requireResidentKey:!1,userVerification:"preferred",authenticatorAttachment:"cross-platform"}:{requireResidentKey:!0,userVerification:"required",authenticatorAttachment:"platform"};s(t,"/hanko/registerType/WEBAUTHN","POST").then(function(e){var n=JSON.parse(e.request),a=v(n.challenge),c={pubKeyCredParams:[{alg:-7,type:"public-key"},{alg:-257,type:"public-key"}],rp:{name:n.rpName},user:{id:a,name:n.displayName,displayName:n.displayName},authenticatorSelection:o,timeout:5e4,challenge:a,excludeCredentials:[],attestation:"none"};navigator.credentials.create({publicKey:c}).then(function(e){var o=k(e.response.attestationObject),a=k(e.response.clientDataJSON),c={credID:e.id.replace(/\//g,"_").replace(/\+/g,"-"),publicKey:o,challenge:n.challenge,clientData:a};s(t,"/hanko/request/verify/webauthn","POST",c).then(function(e){r()})}).catch(function(e){console.error(e)})})},n.state={},n}return b(t,e),t.prototype.render=function(){var e=this.props.children;return o.createElement("button",{onClick:this.addThisDevice},e)},t}(o.Component),g=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),E=n(450),_=y.a.div({display:"flex",flexDirection:"column",alignItems:"center",flex:1}),O=function(e){function t(t){var n=e.call(this,t)||this;return n.showAddHankoAuthenticator=function(){n.setState({showAddHankoAuthenticator:!0})},n.hideAddHankoAuthenticator=function(){n.setState({showAddHankoAuthenticator:!1})},n.completionHandler=function(){n.hideAddHankoAuthenticator(),n.setState({devices:void 0}),n.fetchDevices()},n.fetchDevices=function(){var e=n.props.keycloak;s(e,"/hanko/devices").then(function(e){var t=e.map(function(e){return m(e)});n.setState({devices:t})})},n.b64DecodeUnicode=function(e){return decodeURIComponent(Array.prototype.map.call(atob(e),function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)}).join(""))},n.parseJwt=function(e){var t=e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/");return JSON.parse(n.b64DecodeUnicode(t))},n.state={showAddHankoAuthenticator:!1,devices:void 0},n}return g(t,e),t.prototype.componentDidMount=function(){this.fetchDevices()},t.prototype.render=function(){var e=this.props.keycloak,t=e.token,r=t?this.parseJwt(t):{},a=r.name?r.name:"",s=r.email?r.email:"",c=this.state,i=c.showAddHankoAuthenticator,l=c.devices,u=new URLSearchParams(window.location.search),p=u.get("redirectUrl"),m=u.get("redirectName"),h=m||"return",y=n(451);return o.createElement(_,null,o.createElement("div",{className:"navigation-bar"},o.createElement("div",{className:"flex row"},o.createElement("a",{className:"navigation-bar-header-link",href:p||""},o.createElement("img",{className:"navbar-logo",src:y})),o.createElement("span",{className:"navbar-header"},"Manage Account")),p?o.createElement("a",{className:"navigation-bar-link",href:p},o.createElement("img",{className:"back-arrow",src:E}),h):null),o.createElement("div",{id:"content"},o.createElement("div",{className:"center column"},o.createElement("div",{className:"container"},o.createElement("h1",null,"My Account"),o.createElement("div",{className:"formfield"},o.createElement("label",null,"Name"),o.createElement("span",null,a)),o.createElement("div",{className:"formfield"},o.createElement("label",null,"E-Mail"),o.createElement("span",null,s))),o.createElement("div",{className:"container"},o.createElement("h1",null,"Registered Devices"),void 0===l?o.createElement("div",null,"Loading..."):o.createElement(d,{keycloak:e,devices:l,deviceDeletedHandler:this.fetchDevices}),o.createElement("div",{className:"margin-bottom"}),i?o.createElement(f,{keycloak:e,cancelHandler:this.hideAddHankoAuthenticator,completionHandler:this.completionHandler}):o.createElement("div",{className:"button-list"},o.createElement("button",{onClick:this.showAddHankoAuthenticator},"Add Hanko Authenticator"),o.createElement(w,{refetch:this.fetchDevices,keycloak:e,type:"roaming"},"Add Security Key"),o.createElement(w,{refetch:this.fetchDevices,keycloak:e,type:"platform"},"Add Windows Hello"))),o.createElement(j,{keycloak:e}))))},t}(o.Component),A=n(244),N=function(e){var t=e.keycloak;return o.createElement("div",null,o.createElement("h1",null,"Login failed"),o.createElement("button",{onClick:function(){t.login()}},"Try again"))};var C=A({url:void 0!==window.keycloakUrl?window.keycloakUrl:"https://auth.hanko.io/auth",realm:void 0!==window.realmId?window.realmId:"master",clientId:"hanko-account"});C.init({onLoad:"login-required"}).success(function(e){a.render(o.createElement(O,{keycloak:C}),document.getElementById("root"))}).error(function(){a.render(o.createElement(N,{keycloak:C}),document.getElementById("root"))})}});